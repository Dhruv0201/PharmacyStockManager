<ext:ChildWindow x:Class="PharmacyStockManager.Views.PopupWindows.PurchaseDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ext="http://schemas.xceed.com/wpf/xaml/toolkit"
        xmlns:mat="clr-namespace:MaterialDesignThemes.Wpf;assembly=MaterialDesignThemes.Wpf"
        IsModal="True"
        CaptionForeground="Black"
        CaptionFontSize="14"
        WindowStartupLocation="Center"
        Background="White">

    <ext:ChildWindow.Caption>
        Add / Edit Purchase
    </ext:ChildWindow.Caption>

    <ScrollViewer VerticalScrollBarVisibility="Auto">

        <Grid Margin="20" Width="450">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <TextBlock Text="Purchase Details"
                       FontSize="20"
                       FontWeight="Bold"
                       Margin="0,0,0,15"/>

            <StackPanel Grid.Row="1" VerticalAlignment="Top">

                <StackPanel Margin="0,0,0,10">
                    <TextBlock Text="Supplier:" FontWeight="SemiBold"/>
                    <ComboBox Height="30"
                              ItemsSource="{Binding Suppliers}"
                              DisplayMemberPath="SupplierName"
                              SelectedItem="{Binding SelectedSupplier, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                              SelectedValuePath="SupplierId"
                              Style="{StaticResource ValidationCombobox}"/>
                </StackPanel>

                <StackPanel Margin="0,0,0,10">
                    <TextBlock Text="Purchase Date:" FontWeight="SemiBold"/>
                    <DatePicker Height="30"
                                SelectedDate="{Binding PurchaseDate, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                                Style="{StaticResource ValidationDatePicker}" />
                </StackPanel>

                <StackPanel Margin="0,0,0,10">
                    <TextBlock Text="Invoice Number:" FontWeight="SemiBold"/>
                    <TextBox Height="30"
                             Text="{Binding InvoiceNumber, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                             Style="{StaticResource ValidationTextbox}"/>
                </StackPanel>

                <StackPanel Margin="0,0,0,10">
                    <TextBlock Text="Invoice Image:" FontWeight="SemiBold"/>

                    <StackPanel Orientation="Horizontal">
                        <TextBlock Height="30"
                                 Width="300"
                                 Text="{Binding InvoiceImagePath}"
                                  />

                        <Button Content="Browse"
                                Margin="10,0,0,0"
                                Width="80"
                                Height="30"
                                Command="{Binding BrowseInvoiceCommand}"
                                Background="#1976D2"
                                Foreground="White"
                                Style="{StaticResource RoundedActionButton}"/>
                    </StackPanel>
                </StackPanel>

                <StackPanel Margin="0,0,0,10">
                    <TextBlock Text="Total Amount:" FontWeight="SemiBold"/>
                    <TextBox Height="30"
                             PreviewTextInput="TextBox_PreviewTextInput"
                             DataObject.Pasting="TextBox_Pasting"
                             Text="{Binding TotalAmount, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True}"
                             Style="{StaticResource ValidationTextbox}"/>
                </StackPanel>

                <StackPanel Margin="0,0,0,10">
                    <TextBlock Text="Purchased By:" FontWeight="SemiBold"/>
                    <ComboBox Height="30"
                              ItemsSource="{Binding Users}"
                              DisplayMemberPath="Username"
                              SelectedItem="{Binding SelectedPurchasedBy, UpdateSourceTrigger=LostFocus,ValidatesOnDataErrors=True}"
                              SelectedValuePath="UserId"
                              Style="{StaticResource ValidationCombobox}"/>
                </StackPanel>

            </StackPanel>
            <StackPanel Grid.Row="2"
                        Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        Margin="0,15,0,0">

                <Button Content="Save"
                        Width="90"
                        Height="35"
                        Background="#4CAF50"
                        Foreground="White"
                        Command="{Binding SaveCommand}"
                        Style="{StaticResource RoundedActionButton}"
                        Margin="0,0,10,0"/>

                <Button Content="Cancel"
                        Width="90"
                        Height="35"
                        Background="LightGray"
                        Foreground="Black"
                        Command="{Binding CancelCommand}"
                        Style="{StaticResource RoundedActionButton}"/>
            </StackPanel>
        </Grid>
    </ScrollViewer>
</ext:ChildWindow>
